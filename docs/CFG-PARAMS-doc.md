# Documentation of TEA CFG parameters

Parameters used in TEAmetrics scripts are documented in the following tables. Each table corresponds to one script. Parameters that are common to all scripts are listed in the first table. For example configurations, see files under `teametrics/config/`.

## Common parameters (used in all scripts)
| NAME                  | DESCRIPTION                                                                                                                                                                                                                                                           | TYPE    | DEFAULT                                     | EQUIVALENT PAREMETER IN [RCF SPECS](https://github.com/wegc-juf/tea-metrics/blob/main/docs/TEAmetrics_RCFspecs_v8-3Sep2025.md)   |
|-----------------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|---------|---------------------------------------------|----------------------------------------------------------------------------------------------------------------------------------|
| **input_data**        | Information about input dataset.                                                                                                                                                                                                                                      |         |                                             |
| *dataset*             | Name of input dataset; `ERA5`, `ERA5Land`, `SPARTACUS`, `E-OBS`, `CMIP*` (for gridded data) or `HistAlp` (for station data).                                                                                                                                          | str     | null                                        | KeyVarData_DatasetType                                                                                                           |
| **GeoRegion**         | GeoRegion specific parameters.                                                                                                                                                                                                                                        |         |                                             |
| *region*              | Name of GeoRegion; `AUT`, `SAR`, `SEA`, `FBR`, name of Austrian state, `EUR`, or ISO2 country code.                                                                                                                                                                   | str     | AUT                                         | GR_PolygonRegion                                                                                                                 |
| *gr_type*             | Method to define GR; `polygon`, `corners`, or `center`.                                                                                                                                                                                                               | str     | polygon                                     | GR_Geolocation_Type                                                                                                              |
| *sw_corner*           | Only if *gr_type* `corners`, southwest corner of GR; lon,lat or x,y separated by ",".                                                                                                                                                                                 | x,y     | null                                        | GR_LatLonGrid_SWcorner, GR_UTMXYGrid_SWcorner                                                                                    |
| *ne_corner*           | Only if *gr_type* `corners`, northeast corner of GR; lon,lat or x,y separated by ",".                                                                                                                                                                                 | x,y     | null                                        | GR_LatLonGrid_NEcorner, GR_UTMXYGrid_NEcorner                                                                                    |
| *center*              | Only if *gr_type* `center`, center of GR; lon,lat or x,y separated by ",".                                                                                                                                                                                            | x,y     | null                                        | GR_CenterLatLon, GR_CenterUTMXY                                                                                                  |
| *we_len*              | Only if *gr_type* `center`,length of GR west to east.                                                                                                                                                                                                                 | float   | null                                        | GR_LatLonArea_aroundCenterLatLon, GR_UTMXYArea_aroundCenterUTMXY                                                                 |
| *ns_len*              | Only if *gr_type* `center`,length of GR north to south.                                                                                                                                                                                                               | float   | null                                        | GR_LatLonArea_aroundCenterLatLon, GR_UTMXYArea_aroundCenterUTMXY                                                                 |
| *station*             | Name of station, optional - use only if station data should be used instead of gridded data; `Graz`, `Innsbruck`, `Wien`, `Salzburg`, `BadGleichenberg`, `Kremsmuenster`, or `Deutschlandsberg`.                                                                      | str     | null                                        | n/a                                                                                                                              |
| *agr*                 | Name of Aggregate GeoRegion (AGR), optional - set if AGR should be calculated instead of simple GR; `AUT`, `SAR`, `SEA`, `FBR`, name of Austrian state, `EUR`, `N-EUR`, `C-EUR`,` S-EUR` or ISO2 country code. Can also be used to calculate Grid of GeoRegions only. | str     | null                                        | GR_Computation_Type, AGR_PolygonRegion, AGR_Computation_Type                                                                     |
| *agr_cell_size*       | Size of AGR sub-cell in degrees, in case *agr* is defined.                                                                                                                                                                                                            | float   | 1 for precip and 2 for all other parameters | AGR_LatLonArea_aroundCenterLatLon                                                                                                |
| *agr_range*           | Range covered by AGR given as `lat_min,lat_max,lon_min,lon_max`. Only necessary if AGR != region and AGR not `EUR`, `N-EUR`, `C-EUR`,` S-EUR`, or `AFR`.                                                                                                              | str     | null                                        | AGR_LatLonGrid_SWcorner, AGR_LatLonGrid_NEcorner                                                                                 |
| *grg_grid_spacing*    | Spacing of AGR grid of GRs in degrees or meters, in case *agr* is defined.                                                                                                                                                                                            | float   | 0.5 deg                                     | AGR_LatLonGrid_Spacing                                                                                                           |    
| *land_frac_min*       | Minimum land fraction per sub-cell for AGR calculation; also minimum land fraction for mask generation of `EUR` and `AFR`.                                                                                                                                            | float   | 0.5                                         | n/a                                                                                                                              |
| **parameters**        | Information about parameter and threshold.                                                                                                                                                                                                                            |         |                                             |
| *parameter*           | Name of parameter (key variable) for TEA calculation. Must match parameter name in input data file. E.g. `Tx`, `Tn`, `P`, `Px1h`, `P24h`, ...                                                                                                                         | str     | Tx                                          | KeyVariable                                                                                                                      |
| *precip*              | Marks if precipitation data is used; set true if input is precipitation data.                                                                                                                                                                                         | bool    | false                                       | n/a                                                                                                                              |
| *threshold_type*      | Type of threshold; `abs` for absolute thresholds, `perc` for percentiles.                                                                                                                                                                                             | str     | perc                                        | ThresholdMap_Type                                                                                                                |
| *threshold*           | Threshold value; if *threshold_type* is `perc`, *threshold* defines the percentile, otherwise it is an absolute value.                                                                                                                                                | float   | 95 for precip, 99 for all other parameters  | Constant_Thres, Percentile_Thres                                                                                                 |
| *low_extreme*         | Marks if a low extreme is investigated; set if low extreme is investigated (values lower than threshold are considered extreme).                                                                                                                                      | bool    | false                                       | ThresholdExceedance_Type                                                                                                         |
| *primary_threshold*   | Optional primary threshold value; if set, only consider data points above/below this value for further calculation                                                                                                                                                    | float   | null                                        | n/a                                                                                                                              |
| *smoothing_radius*    | Radius for spatial smoothing of threshold grid in km. Used for SPARTACUS precipitation data.                                                                                                                                                                          | int     | 0                                           | n/a                                                                                                                              |
| *unit*                | Physical unit of chosen parameter.                                                                                                                                                                                                                                    | str     | mm for precip, else degC                    | n/a                                                                                                                              |
| *min_exceedance_area* | Minimum size of exceedance area in areals (100 km2) to be considered as exceedance day of GR.                                                                                                                                                                         | float   | 1                                           | MinimumGRThresExceedanceArea                                                                                                     |
| *min_duration*        | Minimum exceedance duration in days per decade during the reference period to avoid unstable reference results.                                                                                                                                                       | int     | 7                                           | n/a                                                                                                                              |
| **time_params**       | Information about analyzed time period and reference period                                                                                                                                                                                                           |         |                                             |
| *start*               | Start year.                                                                                                                                                                                                                                                           | int     | 1961                                        | TimePeriod_StartDate                                                                                                             |
| *end*                 | End year.                                                                                                                                                                                                                                                             | int     | 2024                                        | TimePeriod_EndDate                                                                                                               |
| *period*              | Climatic time period of interest; `monthly`, `seasonal`, `WAS` (warm season: Apr-Oct), `ESS` (extended summer season: May-Sep), `MAM`, `JJA`, `SON`, `DJF` or `annual`.                                                                                               | str     | annual                                      | AnnualCTP_TEAmetrics                                                                                                             |
| *perc_period*         | Climatic time period of interest for percentile calculation; `monthly`, `seasonal`, `WAS` (warm season: Apr-Oct), `ESS` (extended summer season: May-Sep), `MAM`, `JJA`, `SON`, `DJF` or `annual`.                                                                    | str     | annual                                      | Percentile_EstimationCTPperYear                                                                                                  |
| *ref_period*          | Reference period for amplification factor calculation; `start_year-end_year`, interval \[start_year, end_year\], e.g. `1961-1990`.                                                                                                                                    | str     | 1961-1990                                   | RefPeriod_TEAmetrics                                                                                                             |
| *cc_period*           | Climate change period for amplification factor calculation; `start_year-end_year`, interval \[start_year, end_year\], e.g. `1991-2020`.                                                                                                                               | str     | 2010-2024                                   | CCPeriod_TEAmetrics                                                                                                              |
| *perc_period_yrs*     | Period for percentile calculation; `start_year-end_year`, interval \[start_year, end_year\], e.g. `1961-1990`.                                                                                                                                                        | str     | ref_period                                  | Percentile_EstimationTimePeriod                                                                                                  |
| *decadal_window*      | Parameters that define the decadal window used; `window_size,-deltayears,+deltayears`, e.g. `10,5,4`                                                                                                                                                                  | str     | 10,5,4                                      | AvgWindow_DecadalTEAmetrics                                                                                                      |
| **paths**             | Information about relevant paths                                                                                                                                                                                                                                      |         |                                             |
| *input_data_path*     | Path of input data directory (`/path/to/input_data/`), full path to input filename (`/path/to/input/filename.nc`) or a path containing wildcards (`/path/to/file/ERA5*.nc`).                                                                                          | path    | null                                        | KeyVarData_GenericFilename, ThreshData_GenericFilename                                                                           |
| *statpath*            | Path of static file directory.                                                                                                                                                                                                                                        | path    | null                                        | n/a                                                                                                                              |
| *maskpath*            | Path of mask directory.                                                                                                                                                                                                                                               | path    | statpath                                    | n/a                                                                                                                              |
| *altitude_threshold*  | Minimum altitude in m for creating the mask file. All grid cells below this altitude will be set to NaN. Set to 0 to disable.                                                                                                                                         | float   | 1500                                        | KeyVariable_MSLAltitudeDomain                                                                                                    |
| *mask_sub*            | Subdirectory of mask directory.                                                                                                                                                                                                                                       | str     | masks                                       | n/a                                                                                                                              |
| *outpath*             | Path of output directory for results.                                                                                                                                                                                                                                 | path    | null                                        | n/a                                                                                                                              |
| **general**           | General parameters.                                                                                                                                                                                                                                                   |         |                                             |
| *use_dask*            | Set if Dask should be used for parallel processing.                                                                                                                                                                                                                   | bool    | false                                       | n/a                                                                                                                              |

## calc_TEA
| NAME               | DESCRIPTION                                                                                                                  | TYPE | DEFAULT | EQUIVALENT PAREMETER IN [RCF SPECS](https://github.com/wegc-juf/tea-metrics/blob/main/docs/TEAmetrics_RCFspecs_v8-3Sep2025.md)  |
|--------------------|------------------------------------------------------------------------------------------------------------------------------|------|---------|---------------------------------------------------------------------------------------------------------------------------------|
| *recalc_threshold* | Set if threshold grid should be recalculated.                                                                                | bool | false   | n/a                                                                                                                             |
| *hourly*           | Set if hourly data should be used in addition to daily data. Only possible for ERA5(Land) if available in hourly resolution. | bool | false   | TimeResolution_KeyVarFields                                                                                                     |
| *recalc_daily*     | Set if daily basis variables should be recalculated in case they already exist.                                              | bool | true    | n/a                                                                                                                             |
| *decadal*          | Set if decadal TEA indicators should also be calculated. Only possible if end - start >= 10                                  | bool | true    | n/a                                                                                                                             |
| *recalc_decadal*   | Set if decadal TEA indicators should be recalculated in case they already exist.                                             | bool | true    | n/a                                                                                                                             |
| *decadal_only*     | Set if ONLY decadal TEA indicators should be calculated. Only possible if annual CTP vars already calculated.                | bool | true    | n/a                                                                                                                             |
| *spreads*          | Set if spread estimators of decadal TEA indicators should be calculated.                                                     | bool | false   | n/a                                                                                                                             |
| *compare_to_ref*   | Set if comparison to reference data should be done.                                                                          | bool | false   | n/a                                                                                                                             |

## create_region_masks
### Only necessary if you want to create your own GeoRegion (GR) mask.
| NAME                 | DESCRIPTION                                                                                                                                             | TYPE   | DEFAULT                              | EQUIVALENT PAREMETER IN [RCF SPECS](https://github.com/wegc-juf/tea-metrics/blob/main/docs/TEAmetrics_RCFspecs_v8-3Sep2025.md)  |
|----------------------|---------------------------------------------------------------------------------------------------------------------------------------------------------|--------|--------------------------------------|---------------------------------------------------------------------------------------------------------------------------------|
| *shpfile*            | Only if *gr_type* `polygon`. Shape file of region.                                                                                                      | path   | null                                 | GR_PolygonShapefile                                                                                                             |
| *subreg*             | Only if *gr_type* `polygon`, optional. If true, try to get a subregion with the name defined in the <br/>*region* parameter out of the given *shpfile*. | bool   | false                                | GR_PolygonRegion                                                                                                                |
| *target_sys*         | ID of wanted coordinate System (https://epsg.io) which should be used for mask.                                                                         | int    | 3416 for SPARTACUS and 4326 for ERA5 | GR_UTMZone                                                                                                                      |
| *xy_name*            | Names of x and y coordinates in testfile, separated by ",".                                                                                             | string | x,y for SPARTACUS, lon,lat for ERA5  | n/a                                                                                                                             |
| *orofile*            | File with orography information of target grid.                                                                                                         | path   | null                                 | KeyVariable_GeographicDomain                                                                                                    |
| *lsmfile*            | Only necessary if mask for EUR should be created. File with land-sea-mask of target grid.                                                               | path   | null                                 | KeyVariable_GeographicDomain                                                                                                    | 

## regrid_SPARTACUS_to_WEGNext
### Only necessary for SPARTACUS data, to regrid SPARTACUS data to WEGNext grid.
| NAME                  | DESCRIPTION                             | TYPE | DEFAULT |
|-----------------------|-----------------------------------------|------|---------|
| *raw_data_path*       | Path of input data.                     | path | null    |
| *orography*           | Marks if orography should be regridded. | bool | false   |
| *orog_file*           | Path of orography file.                 | path | null    |
| *wegn_file*           | Dummy WEGN file to extract grid.        | path | null    |
| *regridded_data_path* | Path of output directory.               | path | null    |


## List of allowed variables (you can use these as a placeholder in your config files, values will be replaced at runtime)
| NAME         | DESCRIPTION                                |
|--------------|--------------------------------------------|
| $script_path | Path to the script that is being executed. |

